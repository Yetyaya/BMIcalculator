"use strict";var el_weigh=document.getElementById("weigh"),el_height=document.getElementById("height"),addBtn=document.getElementById("result"),recordList=document.querySelector(".list"),personData=JSON.parse(localStorage.getItem("data"))||[];addBtn.addEventListener("click",addResult,!1),updateList(personData);var filterInt=function(e){return/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/.test(e)?Number(e):NaN};function addResult(){var e=filterInt(el_weigh.value),t=filterInt(el_height.value);if(0==el_weigh.value.length||0==el_height.value.length)el_weigh.value="",el_height.value="",alert("請在欄位填入您的相關資料喔!");else if(e<0||t<0||1==isNaN(e)||1==isNaN(t))el_weigh.value="",el_height.value="",alert("您輸入的資料錯誤，麻煩再輸入一次!");else{var l=t/100,s=new Number(e/(l*l)).toFixed(2);addBtn.removeAttribute("class","result"),addBtn.textContent="",addBtn.setAttribute("class","healthResult"),addBtn.textContent=s;var r=document.createElement("button");r.setAttribute("class","reloadIcon"),addBtn.appendChild(r);var a=document.createElement("p");a.setAttribute("class","resultInfo"),addBtn.appendChild(a);var o=document.querySelector(".healthResult"),d=document.querySelector(".reloadIcon"),n=document.querySelector(".resultInfo");el_weigh.value="",el_height.value="",18.5>s?(a.textContent="過輕",o.style.color="#42B7F7",o.style.border="5px solid #42B7F7",n.style.color="#42B7F7",d.setAttribute("class","underWeight")):18.5<=s&&s<24?(a.textContent="健康",o.style.color="#8AD744",o.style.border="5px solid #8AD744",n.style.color="#8AD744",d.setAttribute("class","health")):24<=s&&s<27?(a.textContent="過重",o.style.color="#FB983D",o.style.border="5px solid #FB983D",n.style.color="#FB983D",d.setAttribute("class","overWeight")):27<=s&&s<30?(a.textContent="輕度肥胖",o.style.color="#FB6C29",o.style.border="5px solid #FB6C29",n.style.color="#FB6C29",d.setAttribute("class","mildObesity")):30<=s&&s<35?(a.textContent="中度肥胖",o.style.color="#F44F0F",o.style.border="5px solid #F44F0F",n.style.color="#F44F0F",d.setAttribute("class","moderateObesity")):(a.textContent="重度肥胖",o.style.color="#F23011",o.style.border="5px solid #F23011",n.style.color="#F23011",d.setAttribute("class","severeObesity"));var i=new Date,c=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),u={result:a.textContent,bmi:s,weigh:e,height:t,date:c};personData.push(u),updateList(personData),localStorage.setItem("data",JSON.stringify(personData))}}function updateList(e){for(var t="",l=0;l<e.length;l++)t+='<div class="recordBox" data-content="'+e[l].result+'"><p class="resultRecord">'+e[l].result+'</p><p>BMI <span class="bmiRecord">'+e[l].bmi+'</span></p><p>體重 <span class="weighRecord">'+e[l].weigh+'</span> kg</p><p>身高 <span class="heightRecord">'+e[l].height+'</span> cm</p><p class="dateRecord">'+e[l].date+'</p><button data-id="'+l+'">X</button></div>';recordList.innerHTML=t;var s=document.querySelectorAll(".recordBox");for(l=0;l<s.length;l++){switch(s[l].dataset.content){case"過輕":s[l].style.borderLeft="7px solid #42B7F7";break;case"健康":s[l].style.borderLeft="7px solid #8AD744";break;case"過重":s[l].style.borderLeft="7px solid #FB983D";break;case"輕度肥胖":s[l].style.borderLeft="7px solid #FB6C29";break;case"中度肥胖":s[l].style.borderLeft="7px solid #F44F0F";break;case"重度肥胖":s[l].style.borderLeft="7px solid #F23011"}}}function deleteBox(e){if(e.preventDefault(),"button"===e.target.localName){var t=e.target.dataset.id;personData.splice(t,1),localStorage.setItem("data",JSON.stringify(personData)),updateList(personData)}}recordList.addEventListener("click",deleteBox,!1);